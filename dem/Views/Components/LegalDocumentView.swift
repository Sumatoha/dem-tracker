import SwiftUI

struct LegalDocumentView: View {
    let title: String
    let content: String
    @Environment(\.dismiss) private var dismiss

    var body: some View {
        NavigationStack {
            ScrollView {
                Text(content)
                    .font(.system(size: 15))
                    .foregroundColor(.textPrimary)
                    .padding(20)
            }
            .background(Color.appBackground)
            .navigationTitle(title)
            .navigationBarTitleDisplayMode(.inline)
            .toolbar {
                ToolbarItem(placement: .topBarTrailing) {
                    Button("Готово") {
                        dismiss()
                    }
                    .foregroundColor(.primaryAccent)
                }
            }
        }
    }
}

// MARK: - Legal Texts

enum LegalTexts {
    static let privacyPolicy = """
    Последнее обновление: Февраль 2026

    Приложение dem ("мы", "наше приложение") уважает вашу конфиденциальность. Эта политика описывает, какие данные мы собираем и как их используем.

    1. КАКИЕ ДАННЫЕ МЫ СОБИРАЕМ

    Мы собираем следующие данные:
    • Данные аккаунта: Apple ID (при авторизации через Sign in with Apple)
    • Данные профиля: имя (по желанию), тип продукта, количество потребления, цена
    • Данные использования: записи о курении (время, триггер)
    • Настройки: цели, параметры программы снижения, настройки уведомлений

    2. КАК МЫ ИСПОЛЬЗУЕМ ДАННЫЕ

    Ваши данные используются исключительно для:
    • Отображения статистики потребления
    • Расчёта экономии и прогресса
    • Отправки уведомлений (только с вашего разрешения)
    • Синхронизации между устройствами

    3. ХРАНЕНИЕ ДАННЫХ

    Данные хранятся на защищённых серверах Supabase. Мы используем шифрование для защиты ваших данных при передаче и хранении.

    4. ПЕРЕДАЧА ДАННЫХ ТРЕТЬИМ ЛИЦАМ

    Мы НЕ продаём и НЕ передаём ваши персональные данные третьим лицам, за исключением:
    • Supabase — для хранения данных
    • Apple — для авторизации через Sign in with Apple

    5. ВАШИ ПРАВА

    Вы имеете право:
    • Запросить копию своих данных
    • Удалить свой аккаунт и все данные
    • Отозвать согласие на уведомления

    Для удаления аккаунта используйте кнопку "Выйти из аккаунта" в приложении или напишите нам.

    6. УВЕДОМЛЕНИЯ

    Push-уведомления отправляются только с вашего явного согласия. Вы можете отключить их в любой момент в настройках приложения или системных настройках iOS.

    7. ИЗМЕНЕНИЯ ПОЛИТИКИ

    Мы можем обновлять эту политику. О существенных изменениях мы уведомим через приложение.

    8. СВЯЗАТЬСЯ С НАМИ

    По вопросам конфиденциальности:
    Email: kakenov.tokmyrza@gmail.com
    """

    static let termsOfService = """
    Последнее обновление: Февраль 2026

    Используя приложение dem, вы соглашаетесь с данными условиями.

    1. ОПИСАНИЕ СЕРВИСА

    dem — это приложение для отслеживания потребления никотина. Приложение помогает:
    • Фиксировать количество выкуренных сигарет/стиков
    • Отслеживать статистику и тренды
    • Следовать программе снижения потребления
    • Видеть экономию денег

    ВАЖНО: dem не является медицинским приложением и не предоставляет медицинских рекомендаций. Для отказа от курения рекомендуем консультацию с врачом.

    2. РЕГИСТРАЦИЯ

    Для использования приложения необходима авторизация через Apple ID. Вы несёте ответственность за сохранность доступа к своему Apple ID.

    3. ПРАВИЛА ИСПОЛЬЗОВАНИЯ

    Запрещается:
    • Использовать приложение в незаконных целях
    • Пытаться получить несанкционированный доступ к серверам
    • Распространять вредоносное ПО через приложение
    • Создавать поддельные аккаунты

    4. КОНТЕНТ ПОЛЬЗОВАТЕЛЯ

    Все данные, которые вы вводите (записи, настройки), принадлежат вам. Мы не претендуем на права собственности на ваш контент.

    5. ОТКАЗ ОТ ГАРАНТИЙ

    Приложение предоставляется "как есть". Мы не гарантируем:
    • Бесперебойную работу сервиса
    • Отсутствие ошибок
    • Достижение конкретных результатов

    6. ОГРАНИЧЕНИЕ ОТВЕТСТВЕННОСТИ

    Мы не несём ответственности за:
    • Косвенные убытки от использования приложения
    • Потерю данных по причинам вне нашего контроля
    • Решения, принятые на основе данных приложения

    7. ИЗМЕНЕНИЯ УСЛОВИЙ

    Мы можем изменять эти условия. Продолжая использовать приложение после изменений, вы принимаете новые условия.

    8. ПРЕКРАЩЕНИЕ ДОСТУПА

    Мы оставляем за собой право приостановить или прекратить ваш доступ к сервису в случае нарушения условий использования.

    9. ПРИМЕНИМОЕ ПРАВО

    Эти условия регулируются законодательством Республики Казахстан.

    10. ЛИЦЕНЗИОННОЕ СОГЛАШЕНИЕ (EULA)

    Использование приложения также регулируется стандартным лицензионным соглашением Apple (EULA):
    https://www.apple.com/legal/internet-services/itunes/dev/stdeula/

    11. КОНТАКТЫ

    По вопросам использования:
    Email: kakenov.tokmyrza@gmail.com
    """
}

#Preview {
    LegalDocumentView(title: "Политика", content: LegalTexts.privacyPolicy)
}
